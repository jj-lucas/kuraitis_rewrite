# Migration `20201128130007-add-url-to-report`

This migration has been generated by Lucas Gabriel Salina D'Ovidio at 11/28/2020, 2:00:08 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;
CREATE TABLE "new_Report" (
    "id" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "resolvedAt" DATETIME,
    "url" TEXT NOT NULL,
    "description" TEXT NOT NULL,
    "imageId" TEXT NOT NULL,

    FOREIGN KEY ("imageId") REFERENCES "Image"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY ("id")
);
INSERT INTO "new_Report" ("id", "createdAt", "resolvedAt", "description", "imageId") SELECT "id", "createdAt", "resolvedAt", "description", "imageId" FROM "Report";
DROP TABLE "Report";
ALTER TABLE "new_Report" RENAME TO "Report";
PRAGMA foreign_key_check;
PRAGMA foreign_keys=ON
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201128124322-add-relation-between-report-and-image..20201128130007-add-url-to-report
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
     provider = "sqlite"
-    url = "***"
+    url = "***"
 }
 generator client {
     provider = "prisma-client-js"
@@ -54,8 +54,9 @@
     id          String    @id @default(cuid())
     createdAt   DateTime  @default(now())
     resolvedAt  DateTime?
     image       Image     @relation(fields: [imageId], references: [id])
+    url         String
     description String
     imageId     String
 }
```


