# Migration `20210125175824-add-cart-sku-to-cart`

This migration has been generated by Lucas Gabriel Salina D'Ovidio at 1/25/2021, 6:58:24 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;
CREATE TABLE "new_CartSku" (
    "id" TEXT NOT NULL,
    "skuId" TEXT NOT NULL,
    "cartId" TEXT NOT NULL,
    "customization" TEXT,

    FOREIGN KEY ("skuId") REFERENCES "Sku"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("cartId") REFERENCES "Cart"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY ("id")
);
INSERT INTO "new_CartSku" ("id", "skuId", "customization") SELECT "id", "skuId", "customization" FROM "CartSku";
DROP TABLE "CartSku";
ALTER TABLE "new_CartSku" RENAME TO "CartSku";
PRAGMA foreign_key_check;
PRAGMA foreign_keys=ON
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210125175453-add-cart-sku-concept..20210125175824-add-cart-sku-to-cart
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
     provider = "sqlite"
-    url = "***"
+    url = "***"
 }
 generator client {
     provider = "prisma-client-js"
@@ -93,10 +93,12 @@
 }
 model CartSku {
     id            String  @id @default(cuid())
-    product       Sku     @relation(fields: [skuId], references: [id])
+    sku           Sku     @relation(fields: [skuId], references: [id])
+    cart          Cart    @relation(fields: [cartId], references: [id])
     skuId         String
+    cartId        String
     customization String?
 }
 model Attribute {
@@ -117,11 +119,12 @@
     shippingProfile ShippingProfile[]
 }
 model Cart {
-    id        String   @id @default(cuid())
-    createdAt DateTime @default(now())
+    id        String    @id @default(cuid())
+    createdAt DateTime  @default(now())
     items     String?
+    cartSku   CartSku[]
 }
 model ShippingProfile {
     id      String @id @default(cuid())
```


